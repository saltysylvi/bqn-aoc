input ← •FLines "inputs/05.txt"
Nats ← {10⊸×⊸+˜´∘⌽¨'0'-˜𝕩⊔˜1-˜∧⟜(+`>⟜»)𝕩∊'0'+↕10}
seeds ← Nats 7↓⊑input
maps ← {⍉𝕩⊏˜⍋1⊏⍉𝕩}¨ {>Nats¨ 1↓𝕩}¨ ((⊢-˜¬×+`)⟨⟩⊸≡¨)⊸⊔ 2↓input

# bins and offsets
bo ← {a←+`1↓𝕩 ⋄ o←-˝2↑𝕩 ⋄ i‿j←{⟨↕¨1+𝕩,/1∾𝕩⟩}1∾˜{(1↓𝕨)≠¯1↓𝕩}˝a ⋄ ⟨∾i⊏¨<˘⍉a, (j∾↕≠o)⍋⊸⊏(0¨j)∾o⟩}¨ maps

# Part 1
Step ← {s𝕊b‿o: s+o⊏˜b⍋s}
•Show ⌊´seeds Step˜´⌽ bo

# Part 2
iseeds ← +`˘-⟜1⌾(1⊏⍉)∘‿2⥊seeds
IBins ← {i←(⊣+↕∘¬˜)´ 𝕨⍋𝕩 ⋄ i⋈ +⟜1⌾(¯1‿¯1⊸⊑) -⟜1⌾(1⊏⍉) 2↕∧𝕩∾𝕨⊏˜¯1↓i}
Step2 ← {s𝕊b‿o: (1‿2⊸⊏˘+o⊏˜0⊸⊏˘)∾b⊸IBins˘s}
•Show ⌊´⥊iseeds Step2˜´⌽ bo
