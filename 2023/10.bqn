g â† >â€¢FLines "inputs/10.txt" # grid
p â† "|-LJ7F" # pipes
c â† âŸ¨âŸ¨Â¯1â€¿0,1â€¿0âŸ©,âŸ¨0â€¿Â¯1,0â€¿1âŸ©,âŸ¨Â¯1â€¿0,0â€¿1âŸ©,âŸ¨Â¯1â€¿0,0â€¿Â¯1âŸ©,âŸ¨1â€¿0,0â€¿Â¯1âŸ©,âŸ¨1â€¿0,0â€¿1âŸ©âŸ© # connections

# Part 1
start â† <âŠ‘('S'=g)/â—‹â¥Šâ†•â‰¢g # find S
n â† {Â¬(ğ•©âŠ‘g)âˆŠ"S."}âŠ¸/{âˆ§Â´0â‰¤ğ•©}Â¨âŠ¸/â¥Š(â†•3â€¿3)+<Â¯1â€¿Â¯1+âŠ‘start # neighboring pipes to S
s â† n/ËœstartâˆŠË˜n+>câŠËœpâŠnâŠ‘g # the two which connect to S
l â† 2â¥Šstart # last two pipes; both S
loop â† startâˆ¾s # save loop indices for pt 2
Step â† {sâ€¿l: âŸ¨l(â‰¢Â¨Ë˜/â—‹â¥ŠâŠ¢)s+>câŠËœpâŠsâŠ‘g, sâŸ©} # get next two pipes in loop, remember last two pipes
iâ†0 â‹„ â€¢Show 1+{ğ•Š:sâ€¿lâ†©Step sâ€¿l â‹„ loopâˆ¾â†©s â‹„ i+â†©1}â€¢_while_{ğ•Š:â‰¢Â´s}@
loop â†© Â¯1â†“loop # remove duplicate last index

# Part 2
# idea: expand grid by interleaving blank rows and columns so that simple flood fill works
# very slow (~90s!), but it gets the job done
es â† 1+2Ã—â‰¢g # expanded shape
o â† {â·ğ•©âˆ¾â¥Š(1â†“ğ•©)+>câŠËœpâŠ(1â†“loop)âŠ‘g}1+2Ã—loop # outside/on loop (starts as expanded,reconnected loop; filled later)
q â† âŸ¨0â€¿0âŸ© # queue for flood fill
FF â† {(âˆ¨Â´ğ•©<0)âˆ¨(âˆ¨Â´ğ•©â‰¥es)âˆ¨âŠ‘ğ•©<âŠ¸âˆŠo ? @ ; oâˆ¾â†©<ğ•© â‹„ qâˆ¾â†©âŸ¨0â€¿1,1â€¿0,0â€¿Â¯1,Â¯1â€¿0âŸ©+<ğ•© â‹„ @}
{ğ•Š:FFâŠ‘qâ‹„qâ†©1â†“q}â€¢_while_{ğ•Š:0â‰ â‰ q}@
â€¢Show +Â´âˆ§Â´Â¨2|Â¬âˆ˜âˆŠâŸœoâŠ¸/â¥Šâ†•es # inside is odd indices not in o
